# REAL-TIME-NEWS

本项目实现实时新闻采集订阅功能，支持新闻频道分类，按频道分类订阅

## 新闻频道类别

| channelid  |  channelname |
|:----------:|:------------:|
|   '100'    |    '全部'    |
|   '101'    |    '国内'    |
|   '102'    |    '国际'    |
|   '103'    |    '社会'    |
|   '104'    |    '体育'    |
|   '105'    |    '娱乐'    |
|   '106'    |    '军事'    |
|   '107'    |    '科技'    |
|   '108'    |    '财经'    |
|   '109'    |    '股市'    |
|   '110'    |    '美股'    |

## 新闻采集

- 来源

    1. 新浪滚动新闻

        展示网页：`https://news.sina.com.cn/roll/#pageid=153&lid=2509&k=&num=50&page=1`

        请求网址：`https://feed.mix.sina.com.cn/api/roll/get?pageid=153&lid=2513&k=&num=50&page=1`

- 采集周期

    30分钟

- 采集内容

    包括：网址、所属频道id列表、标题、时间戳、关键字列表、摘要、正文。一条新闻可以属于多个频道，新闻摘要通过textrank4zh模块从正文进行提取。

## 新闻订阅


## 新闻存储

采用redis进行存储。具体key定义如下：

|    key     |      类型    |   描述   |
|:----------:|:------------:|:-------:|
| channels   |     hash     |  新闻频道类别  |
| lid-xxx    |  sorted set  |  频道包含的新闻条目的key集合，按新闻条目时间戳排序，xxx为频道id |
| news-xxx   |     hash     |  新闻条目内容，xxx为新闻条目的oid |

对每条新闻设置过期时间，达到过期时间的新闻自动删除。过期时间为采集时间+3天（3*24*60*60秒）。同时根据lid-xxx中的新闻条目key查询不到时，将其从集合删除。
